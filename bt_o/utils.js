function _0x175c(){const _0x1e8587=['normalize','745839zNZPZd','cos','min','8cuOeAX','9476614vNTBev','sqrt','fromValues','30krUiaL','92757tUhPIe','sin','transformMat3','2999547ervTcw','transpose','4624926oOGtQU','13180232KXDBAu','195670kWRJkM','create','atan2'];_0x175c=function(){return _0x1e8587;};return _0x175c();}(function(_0x436175,_0x2accc6){const _0x40138c=_0x2095,_0x45d805=_0x436175();while(!![]){try{const _0x165fc3=parseInt(_0x40138c(0x11e))/0x1*(parseInt(_0x40138c(0x11d))/0x2)+parseInt(_0x40138c(0x129))/0x3+parseInt(_0x40138c(0x119))/0x4*(-parseInt(_0x40138c(0x125))/0x5)+-parseInt(_0x40138c(0x123))/0x6+parseInt(_0x40138c(0x11a))/0x7+-parseInt(_0x40138c(0x124))/0x8+parseInt(_0x40138c(0x121))/0x9;if(_0x165fc3===_0x2accc6)break;else _0x45d805['push'](_0x45d805['shift']());}catch(_0xceb371){_0x45d805['push'](_0x45d805['shift']());}}}(_0x175c,0xcabe3));import{vec3,mat3}from'https://esm.sh/gl-matrix';export function gCalcLatLonNorthRotationMatrix(_0x34eabb,_0x53b4ad){const _0x419d7c=_0x2095,_0x128150=_0x34eabb*Math['PI']/0xb4,_0x1ef4e0=_0x53b4ad*Math['PI']/0xb4,_0x4f6114=[-Math[_0x419d7c(0x12a)](_0x128150)*Math[_0x419d7c(0x12a)](_0x1ef4e0),-Math['sin'](_0x128150),Math['cos'](_0x128150)*Math[_0x419d7c(0x11f)](_0x1ef4e0)],_0x5626be=[0x0,0x1,0x0],_0x3d5f12=[];vec3['cross'](_0x3d5f12,_0x5626be,_0x4f6114),vec3[_0x419d7c(0x128)](_0x3d5f12,_0x3d5f12);const _0x15f4ee=[];vec3['cross'](_0x15f4ee,_0x4f6114,_0x3d5f12),vec3[_0x419d7c(0x128)](_0x15f4ee,_0x15f4ee);const _0x5a239c=mat3[_0x419d7c(0x11c)](_0x3d5f12[0x0],_0x15f4ee[0x0],_0x4f6114[0x0],_0x3d5f12[0x1],_0x15f4ee[0x1],_0x4f6114[0x1],_0x3d5f12[0x2],_0x15f4ee[0x2],_0x4f6114[0x2]);return _0x5a239c;}export function gCalcNormalFromScreenCoord(_0x1022db,_0x16ea42,_0x4140fd,_0x20d9ac){const _0x4ea8e3=_0x2095,_0x14c130=Math[_0x4ea8e3(0x12b)](_0x4140fd,_0x20d9ac);let _0x25f0ef={'x':(0x2*_0x1022db['x']-_0x4140fd)/_0x14c130,'y':(0x2*_0x1022db['y']-_0x20d9ac)/_0x14c130},_0x29384b={'x':_0x25f0ef['x']/(_0x16ea42/(_0x14c130/0x2)),'y':_0x25f0ef['y']/(_0x16ea42/(_0x14c130/0x2))},_0x2a5985=_0x29384b['x']*_0x29384b['x']+_0x29384b['y']*_0x29384b['y'],_0x20d48f=Math[_0x4ea8e3(0x11b)](0x1-_0x2a5985),_0x2da177=[_0x29384b['x'],_0x29384b['y'],_0x20d48f];return _0x2da177;}function _0x2095(_0xc00cd,_0x490af8){const _0x175ca6=_0x175c();return _0x2095=function(_0x20956c,_0xc3691c){_0x20956c=_0x20956c-0x119;let _0x29428d=_0x175ca6[_0x20956c];return _0x29428d;},_0x2095(_0xc00cd,_0x490af8);}export function gCalcLatLonFromScreenCoord(_0x500713,_0x1b9d71,_0x35dc6e,_0x321761,_0x592685){const _0x179236=_0x2095;let _0x34f022=gCalcNormalFromScreenCoord(_0x500713,_0x35dc6e,_0x321761,_0x592685);if(_0x34f022['z']<0x0)return null;let _0x1480dc=mat3['create']();mat3[_0x179236(0x122)](_0x1480dc,_0x1b9d71);let _0x98ba60=vec3[_0x179236(0x126)]();vec3[_0x179236(0x120)](_0x98ba60,_0x34f022,_0x1480dc);const _0x3f6927=Math[_0x179236(0x11b)](_0x98ba60[0x0]*_0x98ba60[0x0]+_0x98ba60[0x2]*_0x98ba60[0x2]);let _0x57be1e=Math['atan2'](_0x3f6927,_0x98ba60[0x1])/Math['PI']*0xb4-0x5a,_0x33bcb2=0xb4-Math[_0x179236(0x127)](_0x98ba60[0x2],_0x98ba60[0x0])/Math['PI']*0xb4;if(_0x33bcb2>0xb4)_0x33bcb2-=0x168;if(_0x33bcb2<-0xb4)_0x33bcb2+=0x168;if(_0x57be1e>0x5a)_0x57be1e-=0xb4;if(_0x57be1e<-0x5a)_0x57be1e+=0xb4;return{'lat':_0x57be1e,'lon':_0x33bcb2};}